<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakout Game</title>
</head>
<body>
    <canvas id="canvas" height="300" style="border:1px solid black;border-bottom: 2px solid brown;">Heyyy canvas is not supported</canvas>
    <button onclick="startGame()">Start</button>
    <script>
        const canvas = document.getElementById('canvas')
        const ctx = canvas.getContext('2d')
        const canvasH = canvas.height
        const canvasW = canvas.width

        let x, y, dy, dx, interval
        let radius = 10
        let paddleW = 30
        let paddleX = canvasW/2 - paddleW/2
        let paddleY = canvasH - 10
        setVariables()
        drawBall()
        drawPaddle()
        // startGame()

        function detectCollision() {
            if(x + dx >= canvasW || x + dx < 0){
                dx = -dx
            }

            if( y + dy > canvasH - radius){
                if(x + dx > paddleX && x + dx < (paddleX + paddleW)){
                    dy = -dy
                }
            }

            if(y + dy < 0){
                dy = -dy
            }
        }

        function startGame() {
            interval = setInterval(() => {
                detectCollision()
                x = x + dx
                y = y + dy
                checkGameover()
                ctx.clearRect(0,0,canvasW,canvasH)
                drawPaddle()
                drawBall()
            }, 20)
        }

        function checkGameover() {
            if(y === canvasH - radius){
                alert('game over')
                clearInterval(interval)
                setVariables()
            }
        }

        function setVariables() {
            x = canvasW/2
            y = canvasH - 20
            dx = 5
            dy = -5
        }

        function drawBall() {
            ctx.beginPath()
            ctx.arc(x,y,radius,0,2* Math.PI,false)
            ctx.fillStyle = "#389393"
            ctx.fill()
            ctx.closePath()
        }

        function drawPaddle() {
            ctx.beginPath()
            ctx.rect(paddleX,paddleY,paddleW,10)
            ctx.fillStyle = "#3797a4"
            ctx.fill()
            ctx.closePath()
        }
    </script>
</body>
</html>