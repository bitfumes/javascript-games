<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakout Game</title>
</head>
<body>
    <canvas id="canvas" height="300" style="border:1px solid black;border-bottom: 2px solid brown;">Heyyy canvas is not supported</canvas>
    <button onclick="startGame()">Start</button>
    <script>
        const canvas = document.getElementById('canvas')
        const ctx = canvas.getContext('2d')
        const canvasH = canvas.height
        const canvasW = canvas.width

        let x, y, dy, dx, interval
        setVariables()
        drawCircle(x,y)
        startGame()

        function detectCollision() {
            if(x + dx >= canvasW || x + dx < 0){
                dx = -dx
            }
            if( y + dy > canvasH || y + dy < 0){
                dy = -dy
            }
        }

        function startGame() {
            interval = setInterval(() => {
                detectCollision()
                x = x + dx
                y = y + dy
                checkGameover()
                ctx.clearRect(0,0,canvasW,canvasH)
                drawCircle(x,y)
            }, 20)
        }

        function checkGameover() {
            if(y === canvasH){
                alert('game over')
                clearInterval(interval)
                setVariables()
            }
        }

        function setVariables() {
            x = canvasW/2
            y = canvasH - 20
            dx = 5
            dy = -5
        }

        function drawCircle(x,y) {
            ctx.beginPath()
            ctx.arc(x,y,15,0,2* Math.PI,false)
            ctx.fillStyle = "green"
            ctx.fill()
            ctx.closePath()
        }
    </script>
</body>
</html>